<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="openpilot docs" name="description" />
<meta content="op, openpilot, docs, documentation" name="keywords" />
<meta content="all,follow" name="robots" />
<meta content="index,follow,snippet,archive" name="googlebot" />
<meta content="en_US" property="og:locale" />
<meta content="docs.comma.ai" property="og:site_name" />
<meta content="https://docs.comma.ai" property="og:url" />
<meta content="openpilot Documentation" property="og:title" />
<meta content="website" property="og:type" />
<meta content="image/jpeg" property="og:image:type" />
<meta content="400" property="og:image:width" />
<meta content="https://docs.comma.ai/_static/logo.png" property="og:image" />
<meta content="https://docs.comma.ai/_static/logo.png" property="og:image:url" />
<meta content="https://docs.comma.ai/_static/logo.png" property="og:image:secure_url" />
<meta content="openpilot Documentation" property="og:description" />
<meta content="summary_large_image" property="twitter:card" />
<meta content="https://docs.comma.ai/_static/logo.png" property="twitter:logo" />
<meta content="openpilot Documentation" property="twitter:title" />
<meta content="openpilot Documentation" property="twitter:description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Joystick &mdash; openpilot docs 0.9.5 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.comma.ai/tools/joystick/README.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=61b282d3"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="LogReader" href="../lib/README.html" />
    <link rel="prev" title="CTF" href="../CTF.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #000000" >

          
          
          <a href="../../index.html" class="icon icon-home">
            openpilot docs
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.9.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CARS.html">Supported Cars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CARS.html#id1">265 Supported Cars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CARS.html#don-t-see-your-car-here">Don’t see your car here?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../INTEGRATION.html">Integration with Stock Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LIMITATIONS.html">Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../SAFETY.html">Safety</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">openpilot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#cereal">cereal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#laika">laika</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#models">models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#opendbc">opendbc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#panda">panda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#rednose">rednose</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../overview.html#tools">tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../CTF.html">CTF</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Joystick</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-a-keyboard">Using a keyboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joystick-on-your-comma-three">Joystick on your comma three</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joystick-on-your-laptop">Joystick on your laptop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-joystick-on-your-mobile-device">Web joystick on your mobile device</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/README.html">LogReader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotjuggler/README.html">PlotJuggler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../replay/README.html">Replay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/README.html">comma serial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sim/README.html">Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssh/README.html">SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssh/README.html#connecting-to-ssh-comma-ai">Connecting to ssh.comma.ai</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webcam/README.html">NOTE: this README is outdated. #24590 tracks adding back webcam support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webcam/README.html#run-openpilot-with-webcam-on-pc">Run openpilot with webcam on PC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cabana/README.html">Cabana</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">openpilot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C/C++ API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../c_docs.html">openpilot</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #000000" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">openpilot docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../overview.html">openpilot</a></li>
      <li class="breadcrumb-item active">Joystick</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tools/joystick/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="joystick">
<h1>Joystick<a class="headerlink" href="#joystick" title="Link to this heading"></a></h1>
<p><strong>Hardware needed</strong>: device running openpilot, laptop, joystick (optional)</p>
<p>With joystickd, you can connect your laptop to your comma device over the network and debug controls using a joystick or keyboard.
joystickd uses <a class="reference external" href="https://pypi.org/project/inputs">inputs</a> which supports many common gamepads and joysticks.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>The car must be off, and openpilot must be offroad before starting <code class="docutils literal notranslate"><span class="pre">joystickd</span></code>.</p>
<section id="using-a-keyboard">
<h3>Using a keyboard<a class="headerlink" href="#using-a-keyboard" title="Link to this heading"></a></h3>
<p>SSH into your comma device and start joystickd with the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>tools/joystick/joystickd.py<span class="w"> </span>--keyboard
</pre></div>
</div>
<p>The available buttons and axes will print showing their key mappings. In general, the WASD keys control gas and brakes and steering torque in 5% increments.</p>
</section>
<section id="joystick-on-your-comma-three">
<h3>Joystick on your comma three<a class="headerlink" href="#joystick-on-your-comma-three" title="Link to this heading"></a></h3>
<p>Plug the joystick into your comma three aux USB-C port. Then, SSH into the device and start <code class="docutils literal notranslate"><span class="pre">joystickd.py</span></code>.</p>
</section>
<section id="joystick-on-your-laptop">
<h3>Joystick on your laptop<a class="headerlink" href="#joystick-on-your-laptop" title="Link to this heading"></a></h3>
<p>In order to use a joystick over the network, we need to run joystickd locally from your laptop and have it send <code class="docutils literal notranslate"><span class="pre">testJoystick</span></code> packets over the network to the comma device.</p>
<ol class="arabic">
<li><p>Connect a joystick to your PC.</p></li>
<li><p>Connect your laptop to your comma device’s hotspot and open a new SSH shell. Since joystickd is being run on your laptop, we need to write a parameter to let controlsd know to start in joystick debug mode:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># on your comma device</span>
<span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/data/params/d/JoystickDebugMode
</pre></div>
</div>
</li>
<li><p>Run bridge with your laptop’s IP address. This republishes the <code class="docutils literal notranslate"><span class="pre">testJoystick</span></code> packets sent from your laptop so that openpilot can receive them:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># on your comma device</span>
cereal/messaging/bridge<span class="w"> </span><span class="o">{</span>LAPTOP_IP<span class="o">}</span><span class="w"> </span>testJoystick
</pre></div>
</div>
</li>
<li><p>Start joystickd on your laptop in ZMQ mode.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># on your laptop</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ZMQ</span><span class="o">=</span><span class="m">1</span>
tools/joystick/joystickd.py
</pre></div>
</div>
</li>
</ol>
</section>
<section id="web-joystick-on-your-mobile-device">
<h3>Web joystick on your mobile device<a class="headerlink" href="#web-joystick-on-your-mobile-device" title="Link to this heading"></a></h3>
<p>A browser-based virtual joystick designed for touch screens. Starts automatically when installed on comma body (non-car robotics platform).
For cars, start the web joystick service manually via SSH before starting the car.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>tools/joystick/web.py
</pre></div>
</div>
<p>After starting the car/body, open the web joystick app at this URL: <code class="docutils literal notranslate"><span class="pre">http://[comma</span> <span class="pre">three</span> <span class="pre">IP</span> <span class="pre">address]:5000</span></code></p>
<hr class="docutils" />
<p>Now start your car and openpilot should go into joystick mode with an alert on startup! The status of the axes will display on the alert, while button statuses print in the shell.</p>
<p>Make sure the conditions are met in the panda to allow controls (e.g. cruise control engaged). You can also make a modification to the panda code to always allow controls.</p>
<p><img alt="" src="https://github.com/commaai/openpilot/assets/8762862/e640cbca-cb7a-4dcb-abce-b23b036ad8e7" /></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../CTF.html" class="btn btn-neutral float-left" title="CTF" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../lib/README.html" class="btn btn-neutral float-right" title="LogReader" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, comma.ai.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>